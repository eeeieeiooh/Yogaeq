{{ define "main" }}
<header>
    <h1 class="site-title"><a href="/">{{ .Site.Title }}</a></h1>
    <p class="rule">—</p>
</header>

<main>
    <ul class="posts-list">
        {{ $now := now }}
        {{ $section2026 := .Site.GetPage "posts/2026" }}
        {{ $posts := cond $section2026 $section2026.RegularPages slice }}
        {{ $posts = where $posts "Date" "le" $now }}
        {{ $total := len $posts }}
        {{ $limit := default 11 .Site.Params.postsLimit }}
        {{ $show := $posts.ByDate.Reverse }}
        {{ if gt $total $limit }}
            {{ $show = first $limit $show }}
        {{ end }}
        {{ range $index, $post := $show }}
        <li>
            <span class="post-number">{{ sub $total $index }}.</span>
            <a href="{{ .RelPermalink }}">{{ partial "page-title.html" . }}</a>
        </li>
        {{ end }}
        <li class="posts-more">
            {{ with (index $show 0) }}<span class="post-number"><a class="arrow-link" href="{{ .RelPermalink }}">→</a></span>{{ end }}
        </li>
    </ul>
    <p class="start-promo"><a href="/start/">How to read this site →</a></p>
</main>

<footer class="site-footer">
    <a href="/start/">Start</a>
    <span class="sep">·</span>
    <a href="{{ partial "asanas-section-url.html" . }}">Asanas</a>
    <span class="sep">·</span>
    {{ with .Site.GetPage "section/practices" }}<a href="{{ .Permalink }}">Practices</a>{{ else }}<a href="/practices/">Practices</a>{{ end }}
    <span class="sep">·</span>
    <a href="/about/">Info</a>
</footer>
{{ end }}
