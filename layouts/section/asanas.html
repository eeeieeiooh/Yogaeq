{{ define "main" }}
<header>
    <h1 class="site-title"><a href="/">{{ .Site.Title }}</a></h1>
    <p class="rule">—</p>
</header>

<main class="library-page">
    <h2 class="page-title">{{ .Title }}</h2>

    {{ if .Content }}
    <article class="library-intro">
        {{ partial "render-content.html" (dict "RawContent" .RawContent "Page" .) }}
    </article>
    {{ end }}

    {{ $allAsanas := .RegularPages.ByTitle }}
    <p class="asanas-count">{{ len $allAsanas }} asanas</p>

    <ul class="posts-list library-list asanas-list">
        {{ range $allAsanas }}
        <li>
            <a href="{{ .RelPermalink }}">{{ partial "page-title.html" . }}{{ with .Params.english }}<span class="library-list-meta"> — {{ . }}</span>{{ end }}</a>
            {{ with .Params.category }}<span class="library-list-meta"> · {{ . }}</span>{{ end }}
        </li>
        {{ end }}
    </ul>

    <div class="back-link">
        <a class="arrow-link" href="/">←</a>
    </div>
</main>
{{ end }}
