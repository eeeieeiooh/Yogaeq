{{ define "main" }}
<header>
    <h1 class="site-title"><a href="/">{{ .Site.Title }}</a></h1>
    <p class="rule">—</p>
</header>

<main class="library-page">
    <h2 class="page-title">{{ .Title }}</h2>

    {{ if .Content }}
    <article class="library-intro">
        {{ partial "render-content.html" (dict "RawContent" .RawContent "Page" .) }}
    </article>
    {{ end }}

    <ul class="posts-list library-list">
        {{ $books := .Pages.ByTitle }}
        {{ range $books }}
        <li>
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            {{ with .Params.author }}<span class="library-list-meta"> — {{ . }}</span>{{ end }}
        </li>
        {{ end }}
    </ul>

    {{ with .Site.Taxonomies.genres }}
    <p class="library-genres-label">By genre <span class="library-genres-all"><a href="/genres/">(all)</a></span></p>
    <ul class="posts-list library-genres">
        {{ range .ByCount }}
        <li>
            <a href="{{ .Page.RelPermalink }}">{{ .Page.Title }}</a>
        </li>
        {{ end }}
    </ul>
    {{ end }}

    <div class="back-link">
        <a class="arrow-link" href="/">←</a>
    </div>
</main>

<footer class="site-footer">
    <a href="/about/">Info</a>
    <span class="sep">·</span>
    <a href="/library/">Library</a>
    <span class="sep">·</span>
    <a href="{{ partial "asanas-section-url.html" . }}">Asanas</a>
    <span class="sep">·</span>
    <a href="/practices/">Practices</a>
    <span class="sep">·</span>
    <a href="/poetry/">Poetry</a>
    <span class="sep">·</span>
    <a href="/newsletters/">Newsletters</a>
</footer>
{{ end }}
